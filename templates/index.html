<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Dizionario Reggiano</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <!-- ðŸŽµ Musica di benvenuto -->
    <audio id="introAudio" autoplay>
        <source src="{{ url_for('static', filename='audio/intro.mp3') }}" type="audio/mpeg">
        Il tuo browser non supporta l'audio.
    </audio>

    <h1>ðŸ“˜ Dizionario Reggiano</h1>

    <section class="frase">
        <h2>ðŸ“Œ Frase del Giorno</h2>
        <p><strong>Dialetto:</strong> {{ parola }}</p>
        <p><strong>Italiano:</strong> {{ info.traduzione }}</p>
        <p><strong>Spiegazione:</strong> {{ info.spiegazione }}</p>
        {% if info.audio %}
            <audio controls>
                <source src="{{ url_for('static', filename='audio/' + info.audio) }}" type="audio/mpeg">
                Il tuo browser non supporta l'audio.
            </audio>
        {% endif %}
    </section>

    <section class="form">
        <h2>ðŸ’¡ Proponi una nuova voce</h2>
        <form action="{{ url_for('proponi') }}" method="post">
            <input type="text" name="dialetto" placeholder="Frase in dialetto" required>
            <input type="text" name="italiano" placeholder="Traduzione italiana" required>
            <input type="text" name="spiegazione" placeholder="Spiegazione" required>
            <button type="submit">ðŸ“¨ Invia</button>
        </form>
    </section>

    <p><a href="{{ url_for('dizionario') }}">ðŸ“– Vai al Dizionario</a></p>

    <!-- ðŸŽ§ Script per affievolire la musica al primo clic -->
    <script>
        document.addEventListener("click", function () {
            const audio = document.getElementById("introAudio");
            if (audio && !audio.paused) {
                const fadeOut = setInterval(() => {
                    if (audio.volume > 0.05) {
                        audio.volume -= 0.05;
                    } else {
                        audio.pause();
                        clearInterval(fadeOut);
                    }
                }, 200);
            }
        }, { once: true });
    </script>
</body>
</html>